# random для случайного выбора слова из списка
import random

# Вводим счетчик ходов
hod = 0

# Выводим название игры и правила
print("_Игра 'Поле Чудес'_")
print("ОТГАДАЙТЕ СЛОВО")
# Выводим список доступных команд
print("Команды: /HELP, /STOP, /VVOD, /OST")
print("/HELP - помощь по игре")  # Показывает правила
print("/STOP - сдаться")  # Завершает игру
print("/VVOD - вывести буквы, которые уже вводились")  # История ввода
print("/OST - вывести буквы, которые не вводились", "\n\n")  # Оставшиеся буквы

# Создаем список слов для угадывания (русские и английские слова)
nabor_slov = ['АРБУЗ', 'CAT', 'СОЛНЦЕ', 'КНИГА', 'МОРЕ', 'ГОРОД', 'ФМЛЬМ', 'ЦВЕТОК', 'ДОРОГА', 'ВЕТЕР',
              'СНЕГ', 'ЮПИТЕР', 'ТОЧКА', 'ЗВЕЗДА', 'ЛУНА', 'ВРЕМЯ', 'РОСА', 'РАССВЕТ', 'САД', 'МЕЧТА',
              'ЗАКАТ', 'ЛИМОНАД', 'ТЕПЛО', 'НАДЕЖДА', 'БЕЗМЯТЕЖНОСТЬ', 'ТЕРРАСА', 'ТИШИНА', 'ВИЛЛА', 'МОРОЖЕНОЕ']

# Выбираем случайное слово из списка
slovo = nabor_slov[random.randint(0, len(nabor_slov) - 1)]

# Создаем "загадку" - заменяем все буквы звездочками
zagadka = ["*"] * len(slovo)

# Выводим загаданное слово (пока только звездочки)
print(f"Загаданное слово: " + "".join(zagadka), "\n")

# Создаем множество для хранения уже введенных букв
vse_bukvi = set()

# Создаем множество со всеми буквами алфавита (русские и английские)
alfavit = set("АБВГДЕЁЗЖИЙКЛМНОПРСТУФХЦЧШЩЪЫЬЭЮЯABCDEFGHIJKLMNOPQRSTUVWXYZ")

# Основной игровой цикл - работает пока слово не отгадано
while "".join(zagadka) != slovo:
    # Увеличиваем счетчик ходов
    hod += 1

    # Запрашиваем ввод от пользователя и переводим в верхний регистр
    bukva = input("Введите букву, слово целиком или команду: ").upper()

    # Обработка команды /HELP - показать помощь
    if bukva == "/HELP":
        # Не считаем этот ввод как ход
        hod -= 1
        # Выводим правила игры
        print("Правила игры:")
        print("1. Нужно отгодать слово")
        print("2. У вас есть неограниченное количество попыток")
        print("3. Можно вводить отдельно букву или слово целиком")
        print("4. Можно вводить как русские, так и английские буквы")
        print("5. При отгадывании букв, они будут открываться в слове", "\n")

    # Обработка команды /STOP - сдаться
    elif bukva == "/STOP":
        hod -= 1  # Отменяем последний ход
        print(f"Вы сдались, было сделано ходов: {hod}", "\n")
        break  # Выходим из цикла

    # Обработка команды /VVOD - показать введенные буквы
    elif bukva == "/VVOD":
        hod -= 1  # Отменяем ход
        # Сортируем и выводим введенные буквы
        vvod = " ".join(sorted(vse_bukvi))
        print(f"Вы ввели буквы: {vvod}", "\n")

    # Обработка команды /OST - показать невведенные буквы
    elif bukva == "/OST":
        hod -= 1  # Отменяем ход
        # Вычисляем разницу между алфавитом и введенными буквами
        ost = " ".join(sorted(alfavit - vse_bukvi))
        print(f"Вы не вводили буквы: {ost}", "\n")

    # Если введено слово целиком и оно верное
    elif bukva == slovo:
        print(f"Победа, вы угадали слово, было сделано ходов: {hod}", "\n")
        break  # Завершаем игру

    # Если введено слово, но оно неверное (или неизвестная команда)
    elif len(bukva) > 1:
        if bukva[0] != "/":  # Если это не команда (не начинается с /)
            print("Введено неверное слово", "\n")
        else:
            print("Введена неверная команда", "\n")
            hod -= 1  # Отменяем ход

    # Если ничего не введено
    elif len(bukva) == 0:
        print("Вы ничего не ввели", "\n")

    # Если введена одна буква
    elif len(bukva) == 1:
        # Проверяем, что это буква (русская или английская)
        if "A" <= bukva <= "Z" or "А" <= bukva <= "Я":
            # Если буква уже вводилась
            if bukva in vse_bukvi:
                print("Вы уже вводили такую букву", "\n")

            # Если буквы нет в загаданном слове
            elif bukva not in slovo:
                print("Такой буквы нет в слове", "\n")
                # Добавляем букву в множество введенных
                vse_bukvi.add(bukva.upper())

            # Если буква есть в слове
            else:
                # Открываем все вхождения буквы в слове
                for i in range(len(slovo)):
                    if slovo[i] == bukva:
                        zagadka[i] = bukva

                # Проверяем, полностью ли отгадано слово
                if "".join(zagadka) == slovo:
                    print(f"Победа, вы угадали слово, было сделано ходов: {hod}", "\n")
                else:
                    print("Поздравляем, вы угадали букву", "\n")
                    # Показываем текущее состояние слова
                    print("".join(zagadka))
                # Добавляем букву в множество введенных
                vse_bukvi.add(bukva.upper())
        else:
            print("Вы ввели не букву", "\n")
